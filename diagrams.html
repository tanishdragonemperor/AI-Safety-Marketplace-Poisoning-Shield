<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marketplace Poisoning Shield - Architecture Diagrams</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: #f7fafc; 
            padding: 40px;
        }
        h1 { 
            text-align: center; 
            color: #1a365d; 
            margin-bottom: 40px;
            font-size: 2.5rem;
        }
        h2 { 
            color: #2d3748; 
            margin: 40px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #e2e8f0;
        }
        .diagram-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .mermaid {
            display: flex;
            justify-content: center;
        }
        .caption {
            text-align: center;
            color: #718096;
            font-style: italic;
            margin-top: 15px;
        }
        .instructions {
            background: #edf2f7;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .instructions h3 { color: #2d3748; margin-bottom: 10px; }
        .instructions p { color: #4a5568; }
        @media print {
            body { background: white; padding: 20px; }
            .diagram-container { box-shadow: none; border: 1px solid #e2e8f0; }
            .instructions { display: none; }
        }
    </style>
</head>
<body>
    <h1>ğŸ›¡ï¸ Marketplace Poisoning Shield</h1>
    <p style="text-align: center; color: #718096; margin-bottom: 40px;">Architecture Diagrams for Final Report</p>


    <!-- DIAGRAM 1: System Architecture -->
    <h2>Figure 1: System Architecture Overview</h2>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    subgraph Input["ğŸ“¦ INPUT LAYER"]
        DG["ğŸ—„ï¸ Dataset Generator\n100 Products | 5 Categories"]
    end

    subgraph RedTeam["âš”ï¸ RED TEAM - Attack Simulator"]
        direction LR
        A1["ğŸ‘» Hidden\nCharacters"]
        A2["ğŸ“ Keyword\nStuffing"]
        A3["ğŸ”¤ Homoglyph\nAttack"]
        A4["â­ Fake\nReviews"]
        A5["ğŸ­ Adversarial\nParaphrase"]
        A6["ğŸ—„ï¸ Metadata\nPoisoning"]
    end

    subgraph BlueTeam["ğŸ›¡ï¸ BLUE TEAM - Defense Module"]
        direction LR
        D1["ğŸ‘ï¸ Unicode\nScanner"]
        D2["ğŸ” Keyword\nAnalyzer"]
        D3["ğŸ”¤ Homoglyph\nDetector"]
        D4["â­ Review\nValidator"]
        D5["ğŸ“‹ Metadata\nInspector"]
        D6["ğŸ“Š Statistical\nAnalyzer"]
    end

    subgraph Search["ğŸ” SEARCH PIPELINE"]
        EMB["ğŸ“ TF-IDF\nEmbeddings"]
        IDX["ğŸ“ Dual\nIndex"]
        SIM["ğŸ¯ Similarity\nSearch"]
    end

    subgraph Eval["ğŸ“Š EVALUATION"]
        METRICS["Precision: 95.8%\nRecall: 92.0%\nF1: 93.9%"]
    end

    subgraph UI["ğŸ–¥ï¸ PRESENTATION"]
        API["ğŸ”Œ Flask API"]
        WEB["ğŸŒ React UI"]
    end

    DG -->|"Clean Data"| RedTeam
    DG -->|"Clean Data"| BlueTeam
    RedTeam -->|"25% Poisoned"| BlueTeam
    BlueTeam -->|"Threat Scores"| Search
    EMB --> IDX --> SIM
    Search --> Eval
    Eval --> API --> WEB

    style RedTeam fill:#fed7d7,stroke:#c53030
    style BlueTeam fill:#bee3f8,stroke:#2b6cb0
    style Search fill:#e9d8fd,stroke:#6b46c1
    style Eval fill:#c6f6d5,stroke:#276749
    style UI fill:#feebc8,stroke:#c05621
        </div>
        <p class="caption">Figure 1: Complete system architecture showing data flow from generation through attack, defense, search, and evaluation</p>
    </div>

    <!-- DIAGRAM 2: Defense Pipeline -->
    <h2>Figure 2: Defense Pipeline (6 Layers)</h2>
    <div class="diagram-container">
        <div class="mermaid">
flowchart LR
    IN["ğŸ“¥ INPUT\nProduct"] --> L1["ğŸ‘ï¸ Layer 1\nUnicode Scanner"]
    L1 --> L2["ğŸ” Layer 2\nKeyword Analyzer"]
    L2 --> L3["ğŸ”¤ Layer 3\nHomoglyph Detector"]
    L3 --> L4["â­ Layer 4\nReview Validator"]
    L4 --> L5["ğŸ“‹ Layer 5\nMetadata Inspector"]
    L5 --> L6["ğŸ“Š Layer 6\nStatistical Analyzer"]
    L6 --> AGG["ğŸ¯ Score\nAggregator"]
    AGG --> DEC{{"Threat\n> 0.5?"}}
    DEC -->|"Yes"| FLAG["ğŸš¨ FLAGGED\nSuspicious"]
    DEC -->|"No"| SAFE["âœ… SAFE\nClean"]

    style L1 fill:#bee3f8,stroke:#2b6cb0
    style L2 fill:#bee3f8,stroke:#2b6cb0
    style L3 fill:#bee3f8,stroke:#2b6cb0
    style L4 fill:#bee3f8,stroke:#2b6cb0
    style L5 fill:#bee3f8,stroke:#2b6cb0
    style L6 fill:#bee3f8,stroke:#2b6cb0
    style AGG fill:#e9d8fd,stroke:#6b46c1
    style FLAG fill:#fed7d7,stroke:#c53030
    style SAFE fill:#c6f6d5,stroke:#276749
        </div>
        <p class="caption">Figure 2: Six-layer defense pipeline with weighted score aggregation and threat classification</p>
    </div>

    <!-- DIAGRAM 3: Attack Types -->
    <h2>Figure 3: Attack Types (Red Team)</h2>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    subgraph TextAttacks["ğŸ“ TEXT-BASED ATTACKS"]
        A1["ğŸ‘» HIDDEN CHARACTERS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Zero-width Unicode\nâ€¢ Invisible to humans\nâ€¢ Affects AI tokenization\nâ€¢ +3-10 hidden bytes"]
        A2["ğŸ“ KEYWORD STUFFING\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ SEO spam injection\nâ€¢ BEST, TOP RATED, PREMIUM\nâ€¢ Manipulates search ranking\nâ€¢ Description modification"]
        A3["ğŸ”¤ HOMOGLYPH ATTACK\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Lookalike characters\nâ€¢ Cyrillic/Greek substitution\nâ€¢ Bypasses brand filters\nâ€¢ Visually identical"]
    end

    subgraph SemanticAttacks["ğŸ§  SEMANTIC ATTACKS"]
        A4["â­ FAKE REVIEWS\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Injected 5-star reviews\nâ€¢ Generic positive language\nâ€¢ Rating boost: +1.2 stars\nâ€¢ +5 fake reviews added"]
        A5["ğŸ­ ADVERSARIAL PARAPHRASE\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ False brand associations\nâ€¢ Misleading quality claims\nâ€¢ 'Better than Apple!'\nâ€¢ Semantic manipulation"]
    end

    subgraph HiddenAttacks["ğŸ”’ HIDDEN ATTACKS"]
        A6["ğŸ—„ï¸ METADATA POISONING\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nâ€¢ Fake view counts\nâ€¢ Hidden promotional text\nâ€¢ Manipulated timestamps\nâ€¢ Invisible to users"]
    end

    style A1 fill:#fed7d7,stroke:#c53030
    style A2 fill:#feebc8,stroke:#c05621
    style A3 fill:#e9d8fd,stroke:#6b46c1
    style A4 fill:#fbb6ce,stroke:#b83280
    style A5 fill:#c6f6d5,stroke:#276749
    style A6 fill:#bee3f8,stroke:#2b6cb0
        </div>
        <p class="caption">Figure 3: Six attack types categorized by attack vector - text-based, semantic, and hidden manipulation</p>
    </div>

    <!-- DIAGRAM 4: Data Flow -->
    <h2>Figure 4: Data Flow Architecture</h2>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TD
    subgraph Gen["1ï¸âƒ£ GENERATION"]
        GEN["ğŸ—„ï¸ Dataset Generator"]
        CLEAN["âœ… 75 Clean Products"]
        POISON["â˜ ï¸ 25 Poisoned Products"]
        GEN --> CLEAN
        GEN --> POISON
    end

    subgraph Process["2ï¸âƒ£ DEFENSE ANALYSIS"]
        DEF["ğŸ›¡ï¸ Defense Module"]
        SCORES["ğŸ“Š Threat Scores"]
        CLEAN --> DEF
        POISON --> DEF
        DEF --> SCORES
    end

    subgraph Index["3ï¸âƒ£ SEARCH INDEXING"]
        RAW["ğŸ“ Baseline Index\n(Raw Products)"]
        SAN["ğŸ“ Defended Index\n(Sanitized Products)"]
        SCORES --> RAW
        SCORES --> SAN
    end

    subgraph Search["4ï¸âƒ£ SEARCH COMPARISON"]
        QUERY["ğŸ” Search Query"]
        BASE["âŒ Baseline Results\n(Vulnerable)"]
        DEFEND["âœ… Defended Results\n(Protected)"]
        QUERY --> RAW --> BASE
        QUERY --> SAN --> DEFEND
    end

    subgraph Impact["5ï¸âƒ£ IMPACT ANALYSIS"]
        COMP["ğŸ“Š Side-by-Side\nComparison"]
        RESULT["ğŸ“ˆ Defense blocks\npoisoned products\nfrom top results"]
        BASE --> COMP
        DEFEND --> COMP
        COMP --> RESULT
    end

    style CLEAN fill:#c6f6d5,stroke:#276749
    style POISON fill:#fed7d7,stroke:#c53030
    style BASE fill:#fed7d7,stroke:#c53030
    style DEFEND fill:#c6f6d5,stroke:#276749
    style RESULT fill:#bee3f8,stroke:#2b6cb0
        </div>
        <p class="caption">Figure 4: End-to-end data flow from generation through defense analysis to search impact comparison</p>
    </div>

    <!-- DIAGRAM 5: Evaluation Results -->
    <h2>Figure 5: Evaluation Metrics</h2>
    <div class="diagram-container">
        <div class="mermaid">
flowchart TB
    subgraph Matrix["ğŸ“Š CONFUSION MATRIX"]
        direction LR
        subgraph Predicted["Predicted"]
            subgraph Pos["Positive"]
                TP["âœ… TP: 23\nCorrectly Detected"]
                FP["âš ï¸ FP: 1\nFalse Alarm"]
            end
            subgraph Neg["Negative"]
                FN["âŒ FN: 2\nMissed Attack"]
                TN["âœ… TN: 74\nCorrectly Allowed"]
            end
        end
    end

    subgraph Metrics["ğŸ“ˆ PERFORMANCE METRICS"]
        P["ğŸ¯ PRECISION\n95.8%\nTP / (TP + FP)"]
        R["ğŸ¯ RECALL\n92.0%\nTP / (TP + FN)"]
        F1["â­ F1 SCORE\n93.9%\nHarmonic Mean"]
    end

    TP --> P
    FP --> P
    TP --> R
    FN --> R
    P --> F1
    R --> F1

    style TP fill:#c6f6d5,stroke:#276749
    style TN fill:#c6f6d5,stroke:#276749
    style FP fill:#feebc8,stroke:#c05621
    style FN fill:#fed7d7,stroke:#c53030
    style F1 fill:#bee3f8,stroke:#2b6cb0
        </div>
        <p class="caption">Figure 5: Evaluation results showing confusion matrix and derived performance metrics</p>
    </div>

    <!-- DIAGRAM 6: Red vs Blue Team -->
    <h2>Figure 6: Red Team vs Blue Team</h2>
    <div class="diagram-container">
        <div class="mermaid">
flowchart LR
    subgraph Red["âš”ï¸ RED TEAM\nAttackers"]
        R1["ğŸ¯ Goal: Evade Detection"]
        R2["ğŸ”§ 6 Attack Types"]
        R3["ğŸ‘» Silent Manipulation"]
        R1 --> R2 --> R3
    end

    subgraph Product["ğŸ“¦ PRODUCT DATA"]
        T["Title"]
        D["Description"]
        V["Reviews"]
        M["Metadata"]
    end

    subgraph Blue["ğŸ›¡ï¸ BLUE TEAM\nDefenders"]
        B1["ğŸ¯ Goal: Detect Attacks"]
        B2["ğŸ”§ 6 Defense Layers"]
        B3["ğŸ“Š Threat Scoring"]
        B1 --> B2 --> B3
    end

    Red ==>|"â˜ ï¸ POISON"| Product
    Product ==>|"ğŸ” ANALYZE"| Blue

    style Red fill:#fed7d7,stroke:#c53030
    style Blue fill:#bee3f8,stroke:#2b6cb0
    style Product fill:#feebc8,stroke:#c05621
        </div>
        <p class="caption">Figure 6: Adversarial relationship between Red Team (attackers) and Blue Team (defenders)</p>
    </div>

    <script>
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>